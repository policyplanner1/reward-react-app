//webhook url
https://rewardplanners.com/api/payments/webhook

and then
Copy webhook secret →


//frontend after Razorpay closes → call this API.
router.get('payment-status/:orderId',PaymentController.paymentStatus)


//edge cases to test
Action	                        Expected DB result

Successful payment	            order_payments = success, eorders = paid
Failed payment	                order_payments = failed
Retry payment	                new row created
Close tab after paying	        webhook still marks paid



// frontend
handler: async (response) => {
  await axios.post('/verify-payment', response);

  // wait 1 second (optional small delay)
  const status = await axios.get(`/orders/${orderId}/payment-status`);

  if (status.data.status === 'paid') {
    showSuccess();
  } else {
    showPending(); // very rare, webhook lag
  }
}


//steps
1)POST /api/payments/create-order
{
  "orderId": 123,
  "amount": 4500
}

